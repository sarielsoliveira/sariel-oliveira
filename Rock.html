<!DOCTYPE html>
<html lang="pt">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rock - Sariel Oliveira</title>
    <link href="https://fonts.googleapis.com/css2?family=Koulen&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Martel:wght@300;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="Rock.css">
</head>
<body>
    <!-- NAVBAR -->
    <header class="navbar">
        <div class="navbar-inner">
            <a href="index.html">
                <img src="assets/logo-sariel.png" alt="Logo Sariel Oliveira" class="logo"/>
            </a>
            
            <nav class="nav-links">
                <a href="contact.html">CONTACT</a>
                <a href="work.html">WORK</a>
                <a href="about.html">ABOUT</a>
            </nav>
        </div>
    </header>
    
    <!-- CONTEÚDO DA PÁGINA ROCK -->
    <div class="rock-content">
        <!-- Título e Descrição -->
        <div class="rock-header">
            <div class="rock-title-container">
                <h1 class="rock-title">"Structure of Time: Silent Presence"</h1>
            </div>
            <div class="rock-description">
                <p>This photographic series focuses on a close observation of rock formations, exploring their textures, colors, and structures. The images capture the surface of stone in detail, revealing layers, folds, and patterns shaped by time and the elements.</p>
            </div>
        </div>

        <!-- Galeria de Imagens -->
        <div class="rock-gallery">
            <!-- Imagem Principal 1 -->
            <div class="rock-image-full">
                <img src="Rock-image/1-Rock1.JPG" alt="Rock formation 1 - Textured surface" class="rock-img" data-lightbox="rock-gallery">
            </div>

            <!-- Duas imagens lado a lado -->
            <div class="rock-image-row">
                <img src="Rock-image/1-Rock2.JPG" alt="Rock formation 2 - Geological patterns" class="rock-img-half" data-lightbox="rock-gallery">
                <img src="Rock-image/1-Rock3.JPG" alt="Rock formation 3 - Stone texture" class="rock-img-half" data-lightbox="rock-gallery">
            </div>

            <!-- Imagem Larga 1 -->
            <div class="rock-image-wide">
                <img src="Rock-image/Group 107.png" alt="Rock formation 4 - Layered structure" class="rock-img-wide" data-lightbox="rock-gallery">
            </div>

            <!-- Duas imagens lado a lado 2 -->
            <div class="rock-image-row">
                <img src="Rock-image/1-Rock8.JPG" alt="Rock formation 5 - Detailed surface" class="rock-img-half" data-lightbox="rock-gallery">
                <img src="Rock-image/1-Rock6.JPG" alt="Rock formation 6 - Mineral patterns" class="rock-img-half" data-lightbox="rock-gallery">
            </div>

            <!-- Imagem Vertical 1 -->
            <div class="rock-image-vertical">
                <img src="Rock-image/1-Rock9.JPG" alt="Rock formation 7 - Vertical rock face" class="rock-img-vertical" data-lightbox="rock-gallery">
            </div>

            <!-- Imagem Larga 2 -->
            <div class="rock-image-wide">
                <img src="Rock-image/Group 108.png" alt="Rock formation 8 - Wide rock landscape" class="rock-img-wide" data-lightbox="rock-gallery">
            </div>

            <!-- Descrição 2 -->
            <div class="rock-description-bottom">
                <p>The aim is not to document the landscape, but to approach the material itself. Through framing, light, and color, the rocks are presented as abstract forms—visual compositions that invite a more sensory than geological reading.</p>
            </div>

            <!-- Duas imagens lado a lado 3 -->
            <div class="rock-image-row">
                <img src="Rock-image/1-Rock14.JPG" alt="Rock formation 9 - Stone details" class="rock-img-half" data-lightbox="rock-gallery">
                <img src="Rock-image/1-Rock15.JPG" alt="Rock formation 10 - Natural patterns" class="rock-img-half" data-lightbox="rock-gallery">
            </div>

            <!-- Imagem Principal 2 -->
            <div class="rock-image-full">
                <img src="Rock-image/1-Rock16.JPG" alt="Rock formation 11 - Full rock surface" class="rock-img" data-lightbox="rock-gallery">
            </div>

            <!-- Imagem Vertical 2 -->
            <div class="rock-image-vertical">
                <img src="Rock-image/1-Rock17.JPG" alt="Rock formation 12 - Vertical stone texture" class="rock-img-vertical" data-lightbox="rock-gallery">
            </div>

            <!-- Duas imagens lado a lado 4 -->
            <div class="rock-image-row">
                <img src="Rock-image/1-Rock18.JPG" alt="Rock formation 13 - Stone composition" class="rock-img-half" data-lightbox="rock-gallery">
                <img src="Rock-image/1-Rock19.JPG" alt="Rock formation 14 - Geological formation" class="rock-img-half" data-lightbox="rock-gallery">
            </div>

            <!-- Imagem Vertical 3 -->
            <div class="rock-image-vertical">
                <img src="Rock-image/1-Rock20.JPG" alt="Rock formation 15 - Tall rock structure" class="rock-img-vertical" data-lightbox="rock-gallery">
            </div>

            <!-- Duas imagens lado a lado 5 -->
            <div class="rock-image-row">
                <img src="Rock-image/1-Rock22.JPG" alt="Rock formation 16 - Stone texture close-up" class="rock-img-half" data-lightbox="rock-gallery">
                <img src="Rock-image/1-Rock23.JPG" alt="Rock formation 17 - Rock patterns" class="rock-img-half" data-lightbox="rock-gallery">
            </div>

            <!-- Duas imagens lado a lado 6 -->
            <div class="rock-image-row">
                <img src="Rock-image/1-Rock24.JPG" alt="Rock formation 18 - Stone surface" class="rock-img-half" data-lightbox="rock-gallery">
                <img src="Rock-image/1-Rock25.JPG" alt="Rock formation 19 - Rock details" class="rock-img-half" data-lightbox="rock-gallery">
            </div>

            <!-- Duas imagens lado a lado 7 -->
            <div class="rock-image-row">
                <img src="Rock-image/1-Rock26.JPG" alt="Rock formation 20 - Mineral texture" class="rock-img-half" data-lightbox="rock-gallery">
                <img src="Rock-image/1-Rock27.JPG" alt="Rock formation 21 - Stone layers" class="rock-img-half" data-lightbox="rock-gallery">
            </div>

            <!-- Imagem Vertical 4 -->
            <div class="rock-image-vertical">
                <img src="Rock-image/1-Rock30.JPG" alt="Rock formation 22 - Vertical geological formation" class="rock-img-vertical" data-lightbox="rock-gallery">
            </div>

            <!-- Descrição 3 -->
            <div class="rock-description-bottom">
                <p>Each photograph offers a pause: a chance to view solidity from a different perspective. To discover in the everyday a distinct aesthetic, marked by resistance, transformation, and the quiet presence of the earth. It is also an invitation to find, within the static, a restrained energy—a force that remains, even if it does not immediately reveal itself.</p>
            </div>

            <!-- Imagem Principal 3 -->
            <div class="rock-image-full">
                <img src="Rock-image/1-Rock35.JPG" alt="Rock formation 23 - Large rock formation" class="rock-img" data-lightbox="rock-gallery">
            </div>

            <!-- Imagem Vertical 5 -->
            <div class="rock-image-vertical">
                <img src="Rock-image/1-Rock34.JPG" alt="Rock formation 24 - Final stone texture" class="rock-img-vertical" data-lightbox="rock-gallery">
            </div>
        </div>
    </div>

    <!-- LIGHTBOX (nova estrutura) -->
    <div id="lightbox" class="lightbox">
        <span class="lightbox-close">&times;</span>
        <span class="lightbox-prev">&#10094;</span>
        <span class="lightbox-next">&#10095;</span>
        <div class="lightbox-content">
            <img id="lightbox-image" src="" alt="Gallery Image" draggable="false">
        </div>
        <div class="lightbox-counter">
            <span id="current-index">1</span> / <span id="total-images">24</span>
        </div>
        <div id="lightbox-caption" class="lightbox-caption"></div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Seleciona todas as imagens da galeria Rock
            const images = document.querySelectorAll('[data-lightbox="rock-gallery"]');
            const lightbox = document.getElementById('lightbox');
            const lbImage = document.getElementById('lightbox-image');
            const currIdxTxt = document.getElementById('current-index');
            const totalTxt = document.getElementById('total-images');
            const lightboxCaption = document.getElementById('lightbox-caption');
            const btnNext = document.querySelector('.lightbox-next');
            const btnPrev = document.querySelector('.lightbox-prev');
            const btnClose = document.querySelector('.lightbox-close');
            
            let idx = 0;
            let currentScale = 1;
            let currentTranslateX = 0;
            let currentTranslateY = 0;
            let isDragging = false;
            let dragStartX = 0, dragStartY = 0;
            let initialPinchDistance = 0;
            let initialScale = 1;
            let swipeStartX = 0;
            let wasZooming = false;

            // Atualiza o total de imagens
            totalTxt.textContent = images.length;

            function updateImage() {
                currentScale = 1;
                currentTranslateX = 0;
                currentTranslateY = 0;
                updateTransform();
                lbImage.src = images[idx].src;
                currIdxTxt.textContent = idx + 1;
                // Atualiza a legenda com o alt da imagem
                lightboxCaption.textContent = images[idx].alt || '';
                
                // Adiciona efeito fade-in
                lbImage.style.opacity = '0';
                setTimeout(() => {
                    lbImage.style.opacity = '1';
                }, 50);
            }

            function updateTransform() {
                if (currentScale <= 1) {
                    currentScale = 1;
                    currentTranslateX = 0;
                    currentTranslateY = 0;
                    // Mostra as setas quando não está com zoom (apenas desktop)
                    if (window.innerWidth > 768) {
                        btnNext.style.opacity = "1";
                        btnPrev.style.opacity = "1";
                        btnNext.style.visibility = "visible";
                        btnPrev.style.visibility = "visible";
                    }
                } else {
                    // Esconde as setas quando está com zoom
                    btnNext.style.opacity = "0";
                    btnPrev.style.opacity = "0";
                    btnNext.style.visibility = "hidden";
                    btnPrev.style.visibility = "hidden";
                }
                lbImage.style.transform = `translate(${currentTranslateX}px, ${currentTranslateY}px) scale(${currentScale})`;
            }

            const open = (i) => {
                idx = i;
                updateImage();
                lightbox.style.display = 'flex';
                setTimeout(() => lightbox.classList.add('active'), 10);
                document.body.style.overflow = 'hidden';
            };

            const closeVisual = () => {
                // Fecha o lightbox
                lightbox.classList.remove('active');
                setTimeout(() => {
                    lightbox.style.display = 'none';
                    // Faz scroll para a imagem atual
                    if (images[idx]) {
                        images[idx].scrollIntoView({ behavior: 'smooth', block: 'center' });
                    }
                }, 300);
                document.body.style.overflow = 'auto';
            };

            const next = () => {
                idx = (idx + 1) % images.length;
                updateImage();
            };

            const prev = () => {
                idx = (idx - 1 + images.length) % images.length;
                updateImage();
            };

            // Abre o lightbox ao clicar em qualquer imagem
            images.forEach((img, i) => img.addEventListener('click', () => open(i)));

            // Fecha o lightbox
            btnClose.addEventListener('click', closeVisual);

            // Navegação
            btnNext.addEventListener('click', (e) => {
                e.stopPropagation();
                next();
            });

            btnPrev.addEventListener('click', (e) => {
                e.stopPropagation();
                prev();
            });

            // Arrastar no Mouse (quando com zoom)
            lbImage.addEventListener('mousedown', (e) => {
                if (currentScale > 1) {
                    isDragging = true;
                    dragStartX = e.clientX - currentTranslateX;
                    dragStartY = e.clientY - currentTranslateY;
                    e.preventDefault();
                }
            });

            window.addEventListener('mousemove', (e) => {
                if (!isDragging) return;
                currentTranslateX = e.clientX - dragStartX;
                currentTranslateY = e.clientY - dragStartY;
                updateTransform();
            });

            window.addEventListener('mouseup', () => {
                isDragging = false;
            });

            // Zoom com roda do mouse
            lightbox.addEventListener('wheel', (e) => {
                e.preventDefault();
                const delta = e.deltaY > 0 ? -0.2 : 0.2;
                currentScale = Math.min(Math.max(1, currentScale + delta), 4);
                updateTransform();
            }, { passive: false });

            // Touch Mobile
            lightbox.addEventListener('touchstart', (e) => {
                if (e.touches.length === 2) {
                    wasZooming = true;
                    initialPinchDistance = Math.hypot(
                        e.touches[0].pageX - e.touches[1].pageX,
                        e.touches[0].pageY - e.touches[1].pageY
                    );
                    initialScale = currentScale;
                } else if (e.touches.length === 1) {
                    swipeStartX = e.touches[0].clientX;
                    if (currentScale > 1) {
                        isDragging = true;
                        dragStartX = e.touches[0].clientX - currentTranslateX;
                        dragStartY = e.touches[0].clientY - currentTranslateY;
                    }
                }
            }, { passive: false });

            lightbox.addEventListener('touchmove', (e) => {
                if (e.touches.length === 2) {
                    e.preventDefault();
                    const currentDistance = Math.hypot(
                        e.touches[0].pageX - e.touches[1].pageX,
                        e.touches[0].pageY - e.touches[1].pageY
                    );
                    currentScale = Math.min(
                        Math.max(1, initialScale * (currentDistance / initialPinchDistance)),
                        4
                    );
                    updateTransform();
                } else if (e.touches.length === 1 && isDragging && currentScale > 1) {
                    e.preventDefault();
                    currentTranslateX = e.touches[0].clientX - dragStartX;
                    currentTranslateY = e.touches[0].clientY - dragStartY;
                    updateTransform();
                }
            }, { passive: false });

            lightbox.addEventListener('touchend', (e) => {
                isDragging = false;

                // Se for um toque simples (sem zoom)
                if (e.changedTouches.length === 1 && currentScale === 1 && !wasZooming) {
                    const swipeEndX = e.changedTouches[0].clientX;
                    const diff = swipeStartX - swipeEndX;
                    const screenWidth = window.innerWidth;

                    // Se o movimento foi um deslize (swipe) maior que 50px
                    if (Math.abs(diff) > 50) {
                        if (diff > 0) next(); // Deslizou para a esquerda -> Próxima
                        else prev(); // Deslizou para a direita -> Anterior
                    }
                    // Se foi apenas um toque (tap) rápido
                    else if (Math.abs(diff) < 10) {
                        // Se tocou no lado esquerdo da tela (menos de 50%)
                        if (swipeEndX < screenWidth / 2) {
                            prev();
                        }
                        // Se tocou no lado direito da tela (mais de 50%)
                        else {
                            next();
                        }
                    }
                }

                if (e.touches.length === 0) {
                    if (currentScale <= 1) updateTransform();
                    setTimeout(() => {
                        wasZooming = false;
                    }, 300);
                }
            });

            // Navegação por teclado
            document.addEventListener('keydown', (e) => {
                if (lightbox.style.display === 'flex') {
                    if (e.key === 'Escape') closeVisual();
                    if (currentScale === 1) {
                        if (e.key === 'ArrowRight') next();
                        if (e.key === 'ArrowLeft') prev();
                    }
                }
            });

            // Fecha ao clicar fora da imagem
            lightbox.addEventListener('click', (e) => {
                if (e.target === lightbox || e.target === document.querySelector('.lightbox-content')) {
                    closeVisual();
                }
            });
        });
    </script>
</body>
</html>
